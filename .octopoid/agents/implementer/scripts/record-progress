#!/usr/bin/env python3
"""Record a progress note for the current task."""

import os
import sys
from datetime import datetime
from pathlib import Path

NOTES_FILE = os.environ.get("NOTES_FILE", "../notes.md")


def main() -> int:
    note = " ".join(sys.argv[1:]) if len(sys.argv) > 1 else ""
    if not note:
        print("Usage: record-progress <note>", file=sys.stderr)
        return 1

    notes_path = Path(NOTES_FILE)
    timestamp = datetime.now().strftime("%H:%M:%S")

    with open(notes_path, "a") as f:
        f.write(f"- [{timestamp}] {note}\n")

    print(f"Progress recorded: {note}")
    return 0


if __name__ == "__main__":
    sys.exit(main())
